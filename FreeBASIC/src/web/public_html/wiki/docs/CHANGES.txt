Wikka 1.1.6.0

Released on January 24, 2005 - "The ever growing release"

Thanks to JavaWoman, DarTar, GmBowen, NilsLindenberg, DotMG, AHerdOfTurtles, scumble, PolVazo/pmyatt, DaveBradshaw, ChristianBarthelemy, MikeXstudios, GeorgePetsagourakis, and IanAndolina.

Feature additions:

# Added GeSHi - Generic Syntax Highlighter See SyntaxHighlighter for more info.
# Added DarTar's inline comment formatter feature; see FormattingRules for more info.
# Added JavaWoman's JwCalendar action; see CalendarActionInfo for more info.
# Added DarTar's LastEdit action; see LastEditActionInfo for more info.
# Improved FreeMind support. Map XML data can now be pasted directly into pages. No special markup is needed.
    * This is handled in formatters/wakka.php by looking for this pattern: <map.*?<\/map>.
    * handlers/page/mindmap.mm.php was modified to return only FreeMind data. Previously it was returning the entire page body, which required that the page only contain FreeMind data. 

# Modified the main search function, FullTextSearch.
    * If search string contains capital letters, double-quotes will be added to the search term. This will limit the search to the exact phrase, instead of searching for partial matches.
    * The second mod is to search for partial matches in page titles when using mysql 4. See Mod029fImprovedSearch. The above mod will still override this--use all lowercase if you want partial matches.
          o File modified: /wikka.php 

# Added showcode handler as described on Mod042fShowPageCodeHandler. Modified the edit handler to display a link to showcode if the user does not have write access: "View formatting code for this page".
    * File added: handlers/page/showcode.php
    * File modified: handlers/page/edit.php 

# Added clone handler as described on Mod043fCloneHandler.
    * File added: handlers/page/clone.php 

# Added system information actions. See SysInfoActionInfo for more documentation.
    * Files added: actions/contact.php, actions/countcomments.php, actions/countowned.php, actions/countpages.php, actions/countusers.php, actions/mysqlversion.php, actions/phpversion.php, actions/wikkaname.php, actions/wikkaversion.php.

Bug fixes:

# Fixed "Interwiki is broken" as described on WikkaBugsResolved.
    * Files modified: /wikka.php, /formatters/wakka.php. 

# Fixed "Password change problem" as described on WikkaBugsResolved.
    * File modified: actions/usersettings.php. 

# Fixed "Security bug in UserSettings (minor)" as described on WikkaBugsResolved.
    * File modified: actions/usersettings.php. 

# Added check for valid page name to handlers/page/edit.php. It displays this message if the check fails: "The page name is invalid. Valid page names must start with a letter and contain only letters and numbers."
# Added scumble's suggestion for fixing array_merge problem as detailed on WikkaBugsResolved.
    * File modified: /wikka.php 

# Fixed "Underline in headers" as described on WikkaBugsResolved. This was never a problem in any released versions, only in the 1.1.5.4 code before it was released.
# Made change to WikiEdit as suggested by DotMG. See WikkaBugsResolved.
    * File modified: /wikiedit2/wikiedit2.js 

# Fixed a problem with htmlentities showing in the note field while previewing a page edit.
    * File modified: handlers/page/edit.php 

# Fixed "Strikethrough rendering" as discussed on WikkaBugsResolved. Thanks NilsLindenberg for the ready to go code.
    * File modified: formatters/wakka.php 

# Added check in usersettings to prevent creation of new usernames that are the same as any existing page names. Credit to JavaWoman for the code, see WikkaBugsResolved.
    * Files modified: /wikka.php, and actions/usersettings.php 

# Fixed "WikiEdit UTF-8 Bug" as described on WikkaBugsResolved. Thanks to DaveBradshaw.
    * File modified: wikiedit2/wikiedit2.js 

# Fixed "Forced links Formatter bug" as described on WikkaBugsResolved. Thanks to JavaWoman.
    * File modified: formatters/wakka.php 

# Fixed "Unicode rendering buglet" as described on WikkaBugsResolved. This was resolved by creating a custom htmlspecialchars_ent() function as a wrapper around PHP's built-in htmlspecialchars() function. For consistency, all calls to htmlspecialchars() were replaced by calls to htmlspecialchars_ent() (except code highlighting formatters which really should show entities as entities).

    * Files modified: /wikka.php, actions/flash.php, actions/image.php, actions/textsearch.php, actions/textsearchexpanded.php, actions/usersettings.php, formatters/wakka.php, handlers/page/: acls.php, addcomment.php, edit.php, referrers.php, referrers_sites.php, review_backlist.php, show.php, showcode.php. 

# Fixed a small bug with the MyChanges action not sorting alphabetically if modrewrite was not in use as described in WikkaBugsResolved.
    * File modified: actions/mychanges.php 

# Fixed a small bug with the Feedback action as described in WikkaBugsResolved.
    * File modified: actions/feedback.php 

# Fixed a small bug with the Googleform action as described in WikkaBugsResolved. (JavaWoman).
    * File modified: actions/googleform.php 

# Fixed a security issue in the Files handler. Big thanks to MikeXstudios for finding it and suggesting a solution.
    * File modified: handlers/page/files.xml.php 

# Fixed javascript bug that occured in Mozilla-based browsers when editing pages.
    * Files modified: actions/header.php, handlers/page/edit.php 

# Fixed a number of regular expressions so that a comma is no longer matched for or allowed in a page name.
    * Files modified: wikka.php, formatters/wakka.php 

# Fixed several issues with the Newpage action.
    * File modified: actions/newpage.php 

Misc:

# Updated SafeHTML to version 1.2.0 (See http://pixel-apes.com/safehtml/feed8 for changes)
# Moved double-click event handling from BODY tag to a div tag with attribute class="page". This seems to make more sense. Requested by AHerdOfTurtles, see WikkaBugsResolved.
    * Files modified: actions/header.php, handlers/page/show.php 

# During setup, ownership of default pages will be set to "Public". This was a request from AHerdOfTurtles, see WikkaBugsResolved.
    * File modified: setup/install.php 

# css/wikka.css modified to add style info for LastEdit and JwCalendar.
# Removed file /actions/wakkabug.php. This file was pointing to wakkawiki.com -- which doesn't exist anymore.
# Changed setup links that pointed to wakkawiki.com; they now point to http://wikka.jsnx.com/WikkaInstallation8.
# Slightly updated files in /docs directory: INSTALL, readme, and UPGRADE.
# Added note to bottom of RecentChanges if WikiPing is enabled, per suggestion from NilsLindenberg.
    * File modified: actions/recentchanges.php 

# Modified the code class in /css/wikka.css per suggestion from JavaWoman on WikkaCSS under "Better code rendering".
# Modified raw handler to output plain-text page source, with no header/footer.
    * File modified: handlers/page/raw.php 

# Modified actions/mindmap.php. Simplified applet call.
# Added "Help" button to WikiEdit toolbar that will open a new window to localsite/FormattingRules.
    * File modified: /wikiedit2/wikiedit2.js 

# Added code for smarter mysql_real_escape_string calls, per suggestion from unregistered user, 213-140-6-98.fastres.net. This was done to add compatibility for PHP versions less than 4.3. This problem started in Wikka version 1.1.4.0. The new code checks the existence of mysql_real_escape_string(), and if it doesn't exist it creates a function named mysql_real_escape_string that calls mysql_escape_string.
    * File modified: wikka.php 

# Added a code suggestion from GeorgePetsagourakis for the Redirect function. You can now redirect in one step instead of the previous method of SetMessage() and then Redirect(). The SetMessage function will remain, because there are cases where it's useful to set the message independent of calling Redirect. So, the old method will continue to work, in addition the new method is available.
    * Files modified: wikka.php, actions/usersettings, handlers/page/acls, handlers/page/addcomment, handlers/page/delete 

# Modified the robots meta statement in the header per suggestions from IanAndolina and JavaWoman.
    * File modified: actions/header.php

Wikka 1.1.5.4
The phantom release

    * There are many pages on Wikka Wiki that mention version 1.1.5.4. There never was a 1.1.5.4 release. As the release was prepared, the features and bugfixes added up to a small, but substantial release--more than a subsubminor number change would indicate. All features that are mentioned as being added to version 1.1.5.4 were released in version 1.1.6.0.


Wikka 1.1.5.3
Released on September 27 2004, minor changes

Feature addition:
# PageIndex action modified to show an alphabetical header that allows quick browsing of pages that start with a certain letter. See Wikka:Mod041fPageIndexByLetter8 for more info.

Misc:
# Small edit to Wikka:Mod040fSmartPageTitles8. Page titles will now be made from headers that are 3 or above. Previously it was 2 or above. This is to prevent the equality operator in code from being seen as a title.
# Added a GPL header at the top of the main Wikka file, and included a copy of the GPL in the docs directory.

Wikka 1.1.5.2
Released on September 23 2004, small bugfixes mostly

Bug fixes:
# Fixed a bug in actions/usersettings.php that related to password checking. [Thanks to JavaWoman]
# Fixed invalid XHTML in actions/usersettings.php for checked checkboxes. [Thanks to JavaWoman]
# Replaced 'onClick' text in six different files with 'onclick' to make it valid XHTML.

Misc:
# Removed some entries from /.htaccess 'SetEnvIfNoCase' line to make it less restrictive for common phrases such as 'sex'. [Prompted by feedback from AHerdOfTurtles]
# Modified actions/recentchanges.php to show text '(unregistered user)' when a user is not registered.

Wikka 1.1.5.1
Released on September 18 2004, small bugfixes mostly

Feature addition:
# Added Mod040fSmartPageTitles

Bug fixes:
# Fixed an ACL bug that occured if the ACLs were set back to the default values.
# Fixed a bug that would not allow page ownership to be set to Nobody.
# Fixed a modrewrite-related linking bug in actions/wantedpages.php
# Fixed pagetag function call bug in actions/googleform.php
# Fixed a bug with how comments were being linked to, which was not valid XHTML.
# Fixed a small close tag bug in actions/backlinks.php, which was not valid XHTML.
# Fixed ampersands in interwiki.conf, which would not validate as XHTML.
# Fixed small typo in highscores page.

Misc:
# Added comment "preview" to RecentlyCommented.
# Modified date and time formatting of the 'recentcomments' action.
# Modified date and time formatting of the 'recentlycommented' action.
# Changed the button labels in the usersettings action.

Wikka 1.1.5.0
Released on September 02 2004 - "The FreeMind release"

FreeMind-related additions:
# Added inline mindmap detection to the wakka formatter.
# Added the 'freemind' directory, which contains the Freemind browser applet and FreeMind documentation map.
# Added the 'mindmap' action. (see next item item for an example)
# Added two new page handlers which return raw page text: 'raw' and 'mindmap.mm'

    * The mindmap.mm handler is to allow for users to directly enter their own mindmaps into a page in conjunction with the mindmap action.
          o First: Enter raw XML mindmap data into a page body.
          o Then, all they have to do to show a "live" mindmap is add the mindmap action to a page with a link to the user's mindmap page. e.g. {{mindmap http://domain.com/MyMindMap/mindmap.mm}} 

# Added two page handlers to demonstrate mindmapping recentchanges:

    * recentchanges.xml.mm.php and recentchanges_simple.xml.mm.php 

# Modified the main Wikka script to not add any cruft, such as headers and footers, to 'mm' handlers.

Security:
# Fixed a security hole in the page note feature. Note input is now passed through the htmlspecialchars function.

Bug fixes:
# Fixed a small bug in the install script which created an admin user named 'WikkaInstaller', instead of the user supplied admin name. This bug was introduced way back in version 1.1.3.2. Come on people--how come you didn't catch this!?! ;)

Misc:
# Modified date and time formatting of the 'recentchanges' action.
# Modified wiki link detection to allow for page names that start with multiple capital letters, e.g: XPSetupGuide.
# Moved the "four spaces into tab" feature back to the edit page handler. Also, added the space-into-tab feature on page preview--previously the page had to be saved for it to take effect.

Wikka 1.1.4.0
Released on August 15 2004

    * Fixed small categories-related counting bug.
    * Added IncludeAction [DreckFehler]
    * Fixed output bug in the tables action that was introduced in version 1.1.3.8.
    * Many improvements to TextSearch. [Thanks to AndreaRossato for initial assistance]
    * Added xml.css per suggestion from DotMG.
    * Removed 'trimming' from the Wakka formatter. I think users should be able to have extra line-breaks if they want.
    * Moved converting of '4 consecutive spaces to tab' to Wakka formatter from the Edit Handler. This allows for the option of changing this behavior in the future, rather than storing the tab conversion in the database.
    * Replaced all occurrences of mysql_escape_string with mysql_real_escape_string per recommendation in the PHP manual.
    * Replaced all <i> HTML tags with <em>.
    * Added GetUser checking to referrer pages. [AndreaRossato]


Wikka 1.1.3.9
Released on August 11 2004 - "The Farewell WakkaWiki release"

    * Thoroughly updated the upgrade script to handle upgrading from WakkaWiki to Wikka. 


Wikka 1.1.3.8
Released on August 08 2004

    * Fixed a XSS security bug in the Googleform action.
    * RSS action fixes and mods:
          o Fixed a XSS security bug in the RSS action.
          o Removed the user choice of whether to cache or not...
          o All RSS requests will cache with a default time of 30 minutes.
          o Added the ability to specify a cache time higher or lower than the default, as low as 5 minutes. 
    * Fixed XSS security bug in the Table action.
    * Modified the default CSS slightly for additions and deletions.
    * Small mod to diff handler to show highlighting key when doing an extended diff.
    * Small mod to diff handler to not choke on links due to diff highlighting symbols introduced in version 1.1.3.3.
    * Fixed small note handling bug in the History handler.
    * Updated WikiEdit to version 2.13.


Wikka 1.1.3.7
Released on August 05 2004

    * Fixed a small--yet significant--bug with the way new installs were set to create an index for the pages table. 


Wikka 1.1.3.6
Released on August 04 2004

    * Fixed 'Cannot redeclare class' error message for RSS action when viewed through the history handler.
    * Tweaked the CSS for the edit preview header. It stays fixed in Firefox and looks pretty cool. Looks plain in IE.
    * Revisited the Action function once again to fix security bug. Thanks to DreckFehler for assistance. 


Wikka 1.1.3.5
Released on August 03 2004

    * Fixed a security bug introduced in the Action function in version 1.1.3.1. Thanks to an anonymous user for exploiting it in the sandbox and bringing it to my attention.
    * Minor changes.


Wikka 1.1.3.4
Released on August 02 2004

    * Fixed a small bug in the Link function which prevented inserting links with a &. Thanks to AndreaRossato.


Wikka 1.1.3.3
Released on August 02 2004

    * Implemented the WikiPing protocol. It's non-active by default. Specify a server in wikka.config.php to activate. See WikiPing for more details. Thanks to DreckFehler.
    * Fixed bug in diff highlighting of code sections. Thanks to DreckFehler.
    * Modified feedback action to make the email validator case insensitive. Thanks to DarTar.


Wikka 1.1.3.2
Released on August 01 2004

    * Minor changes over 1.1.3.1...


Wikka 1.1.3.1
Released on August 01 2004

    * New referrer blacklist system added. Look for the blacklist link while viewing referrers.
    * htaccess file modified to handle missing / on the end of URL
    * Feedback action added. Thanks to DarTar.
    * Modified footer to only show the referrers link to logged on users.
    * Pages can now be set to Public. This is useful for not cluttering up the PageIndex with many Owner: X.
    * Googleform action added. Thanks to DreckFehler.
    * Allow for unnamed parameters to actions. Thanks to DreckFehler.
    * Fixed forced links in square brackets. Thanks to DreckFehler.
    * Removed the "show spaces" in wikinames option.
    * Replaced all calls to UserName() with GetUserName(), and removed the UserName function.
    * Modified how PageIndex shows your owned pages.
    * Added RSS action. Unattributed credit because of WakkaWiki being down and original author not written down.
    * ACLs are now only stored if they differ from the default ACLs.
    * Comments are now stored in htmlspecialchar format, instead of being coverted every time the page is shown.
    * Page deletion queries are now made through Query(), instead of LoadSingle(), which caused unseen errors.
    * Overly long tags are now prevented from being stored. Thanks to DreckFehler.
    * and a few other minor changes.


Wikka 1.1.3
Released on June 03 2004

    * Modified Wikka to only store page ACLs in the database if a user has specifically set them.
    * The old way was to store the default ACLs when a page was created... This would lock in the default ACLs for a certain date, but what if you changed the default ACLs at a later date? The page would still be locked in at the old defaults instead of the way it should work: pages should stay defaulted until someone makes the effort to specifically set the ACLs.


Wikka 1.1.2
Released on June 03 2004

    * Re-implemented the database table structure for storing ACLs...
    * And adjusted a few files accordingly.
    * Please note: if you have custom set ACLs, you will need to re-set them after this upgrade.
    * [I'll add more detail later....]


Wikka 1.1.0
Released on May 31 2004

    * This is a pretty significant update. The comment system got a major re-implementation.
    * The old way: Comments were being stored in the 'pages' table....which made no sense.... and were being handled exactly like pages, had their own ACLs, and were parsed for page formatting.
    * The new way: Comments are stored in their own table, do not gunk up the ACLs table, and are handled as plain text and run through htmlspecialchars() to reduce spam and security risks.


Wikka 1.0.6
Released on May 30 2004

    * Minor changes:
    * Fixed a bug in the way the admin_users list is parsed, to handle spaces.
    * Modified ACL handling to allow for !+, which specifies anonymous users.
          o Why? Well..... you might want to specify that only anonymous users can comment on your page. 
    * Updated the syntax examples on the ACL editing page.


Wikka 1.0.5
Released on May 29 2004

    * Minor changes:
    * Added a new function to the main wakka.php file: function ReturnSafeHTML($html)
          o This is to make it easier to run code through safehtml from various files and actions. 
    * Fixed a tiny bug in the Form Open function to close the hidden input tag if mod_rewrite was not in use.
    * Added "double_doublequote_html" to the wakka.config.php file.
          o This is to allow for specifying how to handle html between double doublequotes:
                + Values can be: "safe" [default], "raw", or "disabled". 
    * Modified the wakka formatter to reflect the double_doublequote handling described above.
    * Modified the image action to call the new ReturnSafeHTML function.
    * Updated SafeHTML to version 1.1.0.
    * Added a "newpage" action. You can see it in action at CreateNewPage.
    * Minor changes to the wikka.css file.


Wikka 1.0.4
Released on May 23 2004

    * Edited a few files to achieve valid XHTML and valid CSS. 


Wikka 1.0.3
Released on May 23 2004

    * Revisited the sql code submitted by DotMG that determines RecentlyCommented.
    * Discovered that I should have used it as submitted. :)


Wikka 1.0.2
Released on May 23 2004

    * Fixed an issue with searching that occured if an older version of MySQL was being used.
    * Fixed an issue with the upgrade script.
    * Added error checking to the installer. Credit to WackoWiki.
    * Click on the following link if you'd like to browse the exact code changes:
    * http://www.jsnx.com/wikka-diff/Wikka-1.0.2.htm8


Wikka 1.0.1
Released on May 17 2004 - "The DotMG release"

    * The 1.0.1 release is all code contributions from DotMG:
          o The following actions were modified to better detect comment pages: mychanges.php, mypages.php, pageindex.php.
          o The "wakka" formatter was modified to close tags that were left opened.
          o The "show" page handler was modified to not display the edit button if a page no longer exists. 
    * Click on the following link if you'd like to browse the exact code changes:
    * http://www.jsnx.com/wikka-diff/Wikka1.0.1.htm8


Wikka 1.0.0
Released on May 16 2004. The initial release after months of tweaking by JsnX.